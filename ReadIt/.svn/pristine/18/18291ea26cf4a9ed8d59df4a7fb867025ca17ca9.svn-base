
<%@ page language="java" contentType="text/html; charset=utf-8"
	pageEncoding="utf-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,user-scalable=0,minimal-ui">
<meta name="description"
	content="Vuexy admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
<meta name="keywords"
	content="admin template, Vuexy admin template, dashboard template, flat admin template, responsive admin template, web app">
<meta name="author" content="PIXINVENT">
<title>Swiper - Vuexy - Bootstrap HTML admin template</title>
<link rel="apple-touch-icon"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/images/ico/apple-icon-120.png">
<link rel="shortcut icon" type="image/x-icon"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/images/ico/favicon.ico">
<link
	href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600"
	rel="stylesheet">

<!-- BEGIN: Vendor CSS-->
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/css/vendors.min.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/css/extensions/swiper.min.css">
<!-- END: Vendor CSS-->

<!-- BEGIN: Theme CSS-->
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/bootstrap.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/bootstrap-extended.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/colors.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/components.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/dark-layout.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/bordered-layout.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/semi-dark-layout.css">

<!-- BEGIN: Page CSS-->
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/core/menu/menu-types/horizontal-menu.css">
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/plugins/extensions/ext-component-swiper.css">
<!-- END: Page CSS-->

<!-- BEGIN: Custom CSS-->
<link rel="stylesheet" type="text/css"
	href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/assets/css/style.css">
<!-- END: Custom CSS-->

</head>

<style>
 .feather-arrow-down{
    width: 20px;
    height: 20px;
}
 .feather-users{
    width: 20px;
    height: 20px;
    }
 .feather-check-circle{
    width: 20px;
    height: 20px;
    }
</style>

<body>
<div class="container">
			<div class="card" style="margin: 10px;">
				<div style="float: left;"></div>
				<div class="demo-inline-spacing" style="float: right;">
					<span class="badge bg-primary"> <i data-feather="star" class="me-25"></i> <span>봉사</span></span>
				</div>
				<div style="float: right;">
					<h3 class="card-title" style="text-align: center; font-style: oblique;">${volBoard.vb_title}</h3>
				</div>

				<div class="card-body" style="min-height: 500px">
					<div class="d-flex" style="float: right; padding-right: 30px;">
						<div class="avatar me-50">
							<img src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/images/portrait/small/avatar-s-7.jpg" alt="" width="24" height="24">
						</div>
						<div class="author-info">
							<small class="text-muted me-25">by</small>
							<small><a href="#" class="text-body">${volBoard.vb_writer}</a></small>
							<span class="text-muted ms-50 me-25">|</span>
							<small class="text-muted">작성일</small>
							<small><a href="#" class="text-body">
							<fmt:formatDate value="${volBoard.vb_regdate }" pattern="yyyy-MM-dd"/></a></small>
						</div>
						
					</div>
					<br/>
					<hr>
					<div class="author-info" style="padding: 20px; min-height: 300px;">${volBoard.vb_content}</div>
					<div class="form-group col-sm-12">
							<div class="card card-outline card-success">	
								<div>
								<hr>
									<div class="row">
										<!-- 첨부파일 썸네일 -->
										<c:forEach items="${volBoard.attachList }" var="attach">
										<div class="col-xl-2 col-md-4 col-sm-5">
											<div class="card bg-primary text-white h-75" style="cursor:pointer;" onclick="location.href='<%=request.getContextPath()%>/main/board/volBoard/getFile.do?ano=${attach.ano }';">
												<div class="card-body">
													
													<span class="card-text"><i data-feather='file'></i>&nbsp;${attach.fileName }</span>
												</div>
											</div>
										</div>
										</c:forEach>
									</div>
								</div>				
							</div>
						</div>
					<div class="dropdown blog-detail-share">
							<button type="button" id="modifyBtn" class="btn btn-success" onclick="modify_go('${volBoard.vb_no}');">수 정</button>
							<button type="button" id="removeBtn" class="btn btn-warning" onclick="remove_go('${volBoard.vb_no}');">삭 제</button> 
						<div class="col-lg-12 col-sm-12 text-lg-end text-center">
							
						<button type="button" class="btn btn-primary waves-effect waves-float waves-light" data-bs-toggle="modal" id="applyList"
						data-bs-target="#shareProject" >신청자 목록 확인</button>	
							<%-- <button type="button" class="btn btn-outline-success waves-effect" data-bs-toggle="modal"
							        onclick="javascript:applyList_go('${volApply.vb_no}')" id="applyList" > 신청자 목록 확인</button> --%>
							<button type="button" onclick="javascript:application_go('${volBoard.vb_no}')" id="application" class="btn btn-success">신청하기</button>
							<button type="button" id="cancelBtn" class="btn btn-secondary" onclick="CloseWindow();">닫 기</button>
						</div>
					</div>
				</div>
			</div>
	</div>
	<!-- END: Content-->


	<!-- share project modal -->
                <div class="modal fade" id="shareProject" tabindex="-1" aria-labelledby="shareProjectTitle" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-header bg-transparent">
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" style="margin: 10px; margin-left: 120px; margin-right: 100px;" >
                                <h1 class="text-center mb-1" id="shareProjectTitle"><i data-feather='arrow-down' style="color: skyblue;"></i>&nbsp;봉사 신청자 목록&nbsp;
                                	<i data-feather='arrow-down' style="color: hotpink;"></i></h1>
                                <p class="text-center" style="margin-bottom: 30px; margin-top:25px; font-size: 18px;">해당 봉사 정원에 맞추어서 봉사 신청자를 승인해주세요.&nbsp;
                                	<i data-feather='check-circle' style="color: limegreen;"></i></p>

                                <p class="fw-bolder pt-50 mt-2" style="font-size: 18px;"><i data-feather='users' style="color: plum;"></i>&nbsp;&nbsp;신청자</p>

                                <ul class="list-group list-group-flush mb-2">
                                
                                    <c:forEach items="${volApply}" var="volList">
	                                    <li class="list-group-item d-flex align-items-start border-0 px-0">
	                                        <div class="d-flex align-items-center justify-content-between w-100">
	                                            <div class="me-1">
	                                                <h5 class="mb-25">${volList.mem_id}</h5>
	                                            </div>
	
	                                            <div class="dropdown">
	                                           <!--      <button class="btn btn-flat-secondary dropdown-toggle" type="button" id="member1" data-bs-toggle="dropdown" aria-expanded="false">
	                                                    <span class="d-none d-lg-inline-block">승인 선택</span>
	                                                </button>
	                                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="member1">
	                                                    <li><a class="dropdown-item" href="javascript:void(0)">승인대기</a></li>
	                                                    <li><a class="dropdown-item active" href="javascript:void(0)">승인</a></li>
	                                                    <li><a class="dropdown-item" href="javascript:void(0)">거절</a></li>
	                                                </ul> -->
	                                           		<label class="form-label fw-bolder font-size font-small-4 mb-50" for="addMemberSelect"> &nbsp;승인 여부</label>
						                                <select class="select2 form-select" id="addMemberSelect" style="width: 150px;" name="is_approved">
						                                	<option value="" label="승인 대기" selected="selected" ></option>
						                                    <option id = "volApproved" onclick="volApproved()"  value="1">승인</option>
						                                    <option value="0">승인거절</option>
						                                </select>
	                                            </div>
	                                        </div>
	                                    </li>
                                    </c:forEach>
                                    
                          		</ul>
                                <!--/ member's list  -->

                                <!-- project link -->
                                <div class="d-flex align-content-center justify-content-between flex-wrap" style="margin-top: 40px;">
                                    <div class="d-flex align-items-center me-2" style="margin-bottom: 50px; margin-top: 30px; color: deepskyblue;">
                                        <i data-feather="users" class="font-medium-2 me-50"></i>
                                        <p class="fw-bolder mb-0" >승인 여부가 회원에게 전달됩니다.</p>
                                    </div>
									<div>
										 <button class="btn btn-warning" type="button" id="member1" aria-expanded="false" style="margin-top: 25px; margin-left: 15px; width: 150px;">
	                                                    <span class="d-none d-lg-inline-block">승인 완료</span> </button>
									</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- / share project modal -->
          <!--/ member's list  -->
  
    <!--     </div>
      </div>
    </div>
  </div> -->

	<div class="sidenav-overlay"></div>
	<div class="drag-target"></div>

	<!-- BEGIN: Vendor JS-->
	<script
		src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/js/vendors.min.js"></script>
	<!-- BEGIN Vendor JS-->

	<!-- BEGIN: Page Vendor JS-->
	<script
		src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/js/ui/jquery.sticky.js"></script>
	<!-- END: Page Vendor JS-->

	<!-- BEGIN: Theme JS-->
	<script
		src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/core/app-menu.js"></script>
	<script
		src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/core/app.js"></script>
	<script
		src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/resources/js/common.js"></script>
	<!-- END: Theme JS-->
	<script src="<%=request.getContextPath()%>/resources/js/common.js"></script>
	
	<script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/scripts/pages/modal-share-project.js"></script>
	<!-- BEGIN: Page JS-->
	<!-- END: Page JS-->

	<script>
		$(window).on('load', function() {
			if (feather) {
				feather.replace({
					width : 14,
					height : 14
				});
			}
		})
	</script>

	<script>
		function modify_go(vb_no) {
			location.href = "modifyForm.do?vb_no=" + vb_no;
		}

		function remove_go(vb_no) {
			location.href = "remove.do?vb_no=" + vb_no;
		}
		
		function application_go(vb_no) {
			var loginInfo = '${loginUser.mem_id}';
			if(loginInfo == ''){
				alert("로그인 후 사용 가능합니다.")
				window.close();
				opener.parent.location.href = "http://localhost/readit/common/loginForm.do";
			}else{
				<c:choose>
					<c:when test="${duplicateCheck}">
						alert("이미 예약 되어있습니다.");
					</c:when>
					<c:otherwise>
						location.href = "application.do?vb_no=" + vb_no;
					</c:otherwise>
				</c:choose>
				
			}
		}
	</script>		

    <script>
		
		$(function () {
			var volApproved = $('#volApproved');
			
			volApproved.on('click', function () {
				   Swal.fire({
					  title: '해당 회원을 승인하겠습니까?',
					  text: "승인  완료하면 해당 회원에게 알림이 갑니다.",
					  icon: 'warning',
					  showCancelButton: true,
					  confirmButtonText: '네',
					  cancelButtonText: '아니요',
					  customClass: {
						  confirmButton: 'btn btn-primary',
						  cancelButton: 'btn btn-outline-danger ms-1'
					  },
					  buttonsStyling: false
				  }).then(function (result) {
					  if (result.value) {
						  Swal.fire({
							  icon: 'success',
							  title: '승인 완료되었습니다.',
							  text: '',
							  customClass: {
								  confirmButton: 'btn btn-success'
							  }
						  });
					  }
				  }); 
			  });
		});
		
	</script> 
	
	<script>
	$(document).ready(function() {
		// 모달창 
		// 모달창id얻기
        var modal = document.getElementById('shareProject');
        // 클릭id얻기
        var btn = document.getElementById("applyList");
        // 닫기
        var close = document.getElementsByClassName("modal_close")[0];                                          
        //검색버튼클릭시 모달창 block
        btn.onclick = function() {
            modal.style.display = "block";
        }
        // close_btn클릭시 모달창none
        close.onclick = function() {
            modal.style.display = "none";
        }
        // 모달창외 클릭시 모달 닫힘
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
  });
		
	</script>
		
	<script>	
		<c:if test="${from eq 'modify'}">
		alert("수정되었습니다.");
		</c:if>
		<c:if test="${from eq 'remove'}">
		alert("삭제되었습니다.")
		window.close();
		window.opener.location.reload();
		</c:if>
	</script>
	
