package bookred.member.service;

import java.sql.SQLException;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import bookred.admin.command.PageMaker;
import bookred.book.command.BookCriteria;
import bookred.book.command.BookPageMaker;
import bookred.book.dao.BookDAO;
import bookred.book.dto.BookVO;
import bookred.main.dto.EventVO;
import bookred.member.command.RentCriteria;
import bookred.member.command.RentPageMaker;
import bookred.member.dao.RentBackDAO;
import bookred.member.dao.ReviewDAO;
import bookred.member.dto.RentBookVO;
import bookred.member.dto.ReviewVO;
import bookred.member.dto.RentBackVO;

public class ReviewServiceImpl implements ReviewService {

	private ReviewDAO reviewDAO;

	public void setReviewDAO(ReviewDAO reviewDAO) {
		this.reviewDAO = reviewDAO;
	}

	@Override
	public ReviewVO getReviewByRentNo(int rev_no) throws SQLException {
		ReviewVO review = reviewDAO.selectReviewByRevNo(rev_no);
		return review;
	}

	@Override
	public Map<String, Object> getReviewList(RentCriteria cri, ReviewVO review) throws SQLException {
		Map<String, Object> dataMap = new HashMap<String, Object>();		
		
		System.out.println("getReviewList "+review.getIs_return());
		System.out.println("getReviewList "+review.getMem_id());
		List<ReviewVO> reviewList = reviewDAO.selecReviewList(cri, review);
		System.out.println(reviewList.get(0).getRev_regdate());
		
		String mem_id = review.getMem_id();
		
		int totalCount = reviewDAO.selectReviewListCount(cri,mem_id);
		RentPageMaker pageMaker = new RentPageMaker();

		pageMaker.setCri(cri);
		pageMaker.setTotalCount(totalCount);
		
		System.out.println(reviewList.get(0).getBook_title());

		dataMap.put("reviewList", reviewList);
		dataMap.put("pageMaker", pageMaker);

		return dataMap;
	}



}
