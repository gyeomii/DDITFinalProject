<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="RentReturn-Mapper">
	<select id="selectIsbnList" resultType="str">
		select isbn 
		from book_reserve 
		where rm_no = #{rm_no}
	</select>
	
	<select id="selectRMList" resultType="rm">
		select * 
		from rm
		where rent_code = #{rent_code}
	</select>
	
	<update id="updateRMStatus" parameterType="rm">
		update rm
		set rent_status = #{rent_status}
		where rm_no = #{rm_no}
	</update>
	
	<select id="selectLocker" resultType="locker">
		select * 
		from locker
		where rm_no = #{rm_no}
	</select>
	
	<select id="selectCarNo" parameterType="int" resultType="str">
		select dt_car_no
		from drivethru
		where rm_no = #{rm_no}
	</select>
	
	<insert id="insertRMLibrary" parameterType="rm">
		insert into rm(rm_no, want_date, mem_id, rent_code, rent_status) 
		values(#{rm_no}, #{want_date} , #{mem_id} ,4 ,5)
	</insert>
	
	<select id="selectRMSeqNextVal" resultType="int">
		select rm_no_seq.nextVal from dual	
	</select>
	
	<select id="selectRentSeqNext" resultType="int">
		select
		rent_no_seq.nextval as rent_no from dual
	</select>
	
	
	<insert id="insertRentBackLibrary" parameterType="rentBack">
		insert into rent_back( RENT_NO, RENT_DATE, DUE_DATE, IS_RETURN, RM_NO, BOOK_NO, MEM_ID)
			values(#{rent_no}, #{rent_date} , sysdate + 14, 'Y', #{rm_no}, #{book_no}, #{mem_id})
	</insert>
	
</mapper>