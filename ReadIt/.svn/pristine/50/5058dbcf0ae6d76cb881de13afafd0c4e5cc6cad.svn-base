<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

<!DOCTYPE html>
<html class="loading" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimal-ui">
    <meta name="description" content="Vuexy admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Vuexy admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>Advance Card - Vuexy - Bootstrap HTML admin template</title>
    <link rel="apple-touch-icon" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/css/charts/apexcharts.css">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/components.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/dark-layout.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/bordered-layout.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/themes/semi-dark-layout.css">

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/css/pages/app-chat-list.css">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/assets/css/style.css">
    <!-- END: Custom CSS-->

</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu-modern  navbar-floating footer-static  " data-open="click" data-menu="vertical-menu-modern" data-col="">

    <!-- BEGIN: Content-->
<!--         <div class="content-wrapper container-xxl p-0"> -->
        <div class="content-wrapper ">
            <div class="content-header row">
                <div class="content-header-left col-md-9 col-12 mb-2">
                    <div class="row breadcrumbs-top">
                        <div class="col-12" style="text-align: center; margin-top: 15px; margin-bottom: -15px;">
                            <h2 class="content-header-title float-start mb-0" >입고 도서 등록</h2>
                        </div>
                         <div class="divider divider-success">
		           			<div class="divider-text" style="padding: 0px;"></div>
		        		</div>
                    </div>
                </div> 	
               
            </div>
            <div class="content-body">
<!--          		<form action="registQuickNewBook.do" role="nbw_codeForm" class="form"> -->
			<form action="registQuickNewBook.do" role="bookform" class="form">
           	 <div class="row col-12">	
            		<div class="demo-inline-spacing mb-2 col-12" style="margin-left: 100px; margin-top: -50px;">
	                      <div class="form-check form-check-primary">
	                         <input class="form-check-input" type="radio" name="nbw_code" id="purchase" value="0" unchecked="">
	                         <input class="form-check-input" type="hidden" name="nbw_name" id="nbw_name" value="구매" >
	                          <label class="form-check-label" for="purchase">구매</label>
	                      </div>
	                      <div class="form-check form-check-secondary">
	                          <input class="form-check-input" type="radio" name="nbw_code" id="copyBook" value="1" unchecked="">
<!-- 	                          <input class="form-check-input" type="hidden" name="nbw_name" id="nbw_name" value="" > -->
	                          <label class="form-check-label" for="copyBook">납본</label>
	                      </div>
	                      <div class="form-check form-check-success">
	                          <input class="form-check-input" type="radio" name="nbw_code" id="donation" value="2" unchecked="">
<!-- 	                          <input class="form-check-input" type="hidden" name="nbw_name" id="nbw_name" value="" > -->
	                          <label class="form-check-label" for="wishBook">기증</label>
	                      </div>
	                      <div class="form-check form-check-danger">
	                          <input class="form-check-input" type="radio" name="nbw_code" id="wishBook" value="3" unchecked="">
<!-- 	                          <input class="form-check-input" type="hidden" name="nbw_name" id="nbw_name" value="" > -->
	                          <label class="form-check-label" for="donation">비치</label>
	                      </div>
                 	 </div>
				</div>
<!--                 </form> -->
				
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                
<!--                                 <form action="registQuickNewBook.do" role="bookform" class="form"> -->
                                    <div class="row">
                                        <div class="col-md-6 col-12 mb-1">
						                    	<span class="badge badge-light-secondary" style="margin-bottom: 5px;">제목</span>
						                        <input type="text" class="form-control" name="book_title" placeholder="입고 도서 제목을 입력하세요." aria-label="Amount">
						                        <input type="hidden" class="form-control" id="nb_title" name="nb_title" value="" placeholder="Button on both side" aria-label="Amount">
	                					</div>
                                        <div class="col-md-6 col-12 mb-1">
						                    	<span class="badge badge-light-secondary" style="margin-bottom: 5px;">저자</span>
						                        <input type="text" class="form-control" name="book_author" placeholder="저자명을 입력하세요." aria-label="Amount">
						                        <input type="hidden" class="form-control" id="nb_author" name="nb_author" placeholder="Button on both side" aria-label="Amount">
	                					</div>
                                        <div class="col-md-6 col-12 mb-1">
						                    	<span class="badge badge-light-secondary" style="margin-bottom: 5px;">출판사</span>
						                        <input type="text" class="form-control" name="book_publisher" placeholder="출판사명을 입력하세요." aria-label="Amount">
						                        <input type="hidden" class="form-control" id="nb_publish" name="nb_publish" placeholder="Button on both side" aria-label="Amount">
	                					</div>
                                        <div class="col-md-6 col-12 mb-1">
						                    	<span class="badge badge-light-secondary" style="margin-bottom: 5px;">발행연도</span>
						                        <input type="text" class="form-control" id="book_publishdate" name="book_publishdate" placeholder="발행연도를 입력하세요." aria-label="Amount">
	                					</div>
                                        <div class="col-md-6 col-12 mb-1">
						                    	<span class="badge badge-light-secondary" style="margin-bottom: 5px;">ISBN</span>
						                        <input type="text" class="form-control" name="book_isbn" placeholder="ISBN을 입력하세요(-생략)" aria-label="Amount">
						                        <input type="hidden" class="form-control" id="isbn" name="isbn" placeholder="ISBN을 입력하세요(-생략)" aria-label="Amount">
	                					</div>
                                        <div class="col-md-6 col-12 mb-1" id="wishBookDiv" style="display: none;">
						                    	<span class="badge badge-light-warning" style="margin-bottom: 5px;">희망도서 신청번호</span>
						                    <div class="input-group">
						                        <input type="text" class="form-control" id="wb_no" name="wb_no" value="0" placeholder="Button on both side" aria-label="Amount">
<!-- 						                        <input type="text" class="form-control" id="wb_no" name="wb_no_hidden" value="0" placeholder="Button on both side" aria-label="Amount"> -->
						                        <button class="btn btn-outline-primary waves-effect" type="button" onclick="OpenWindow()">
						                        	<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
						                        </button>
						                    </div>
	                					</div>
	                					<div class="col-md-6 col-12 mb-1" id="donationMemIdDiv" style="display: none;">
						                    	<span class="badge badge-light-warning" style="margin-bottom: 5px;">기증회원 아이디</span>
						                    <div class="input-group">
						                        <input type="text" class="form-control" id="searchMemId" name="mem_id" value="" 
						                        		onkeyup="if(window.event.keyCode==13){memSearch()}"
						                        		placeholder="찾을 회원의 아이디를 입력하세요." aria-label="Amount">
						                        <button class="btn btn-outline-primary waves-effect" type="button" onclick="memSearch();">
						                        	<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
						                        </button>
						                    </div>
	                					</div>
                                        <div class="col-md-6 col-12 mb-1" id="donationMemNameDiv" style="display: none;">
						                    	<span class="badge badge-light-warning" style="margin-bottom: 5px;">기증자명</span>
<!-- 						                   	<div class="input-group"> -->
						                        <input type="text" class="form-control" placeholder="기증회원 아이디를 검색하면 자동입력됩니다." 
						                        		id="info_mem_name"
						                        		aria-label="Amount" readonly="readonly">
<!-- 						                        <button class="btn btn-outline-primary waves-effect" type="button"> -->
<%-- 						                        	<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> --%>
<!-- 						                        </button> -->
<!-- 						                    </div> -->
	                					</div>
                                       
	                				<div class="row">
                                        <div class="d-grid col-6">
                                            <button type="button" class="btn btn-secondary" onclick="alert('등록완료');">입력완료</button>
                                        </div>
                                        <div class="d-grid col-6">
                                            <button type="button" class="btn btn-warning" onclick="alert('수정');">내용수정</button>
                                        </div>
	                				</div>
	                				<div class="row" style="margin-top: 20px;">
                                        <div class="d-grid col-6">
<!--                                             <button type="submit" class="btn btn-primary" onclick="alert('등록완료');">등록완료</button> -->
                                            <button type="button" onclick="newBookRegist()" class="btn btn-primary">등록완료</button>
                                        </div>
                                        <div class="d-grid col-6">
                                            <button type="button" class="btn btn-danger" onclick="window.close();">취소</button>
                                        </div>
	                				</div>
                                    </div>
<!--                                 </form> -->
                                </form>
                            </div>
                        </div>
                    </div>
                    <!--/ Payment Card -->
                </div>
			

            </div>
        </div>
    <!-- END: Content-->

    <div class="sidenav-overlay"></div>
<!--     <div class="drag-target"></div> -->


    <!-- BEGIN: Vendor JS-->
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/js/vendors.min.js"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/vendors/js/charts/apexcharts.min.js"></script>
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/core/app-menu.js"></script>
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/core/app.js"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page JS-->
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/scripts/cards/card-advance.js"></script>
    <script src="<%=request.getContextPath()%>/resources/vuexy/html-version/Bootstrap5/vuexy-html-bootstrap5-admin-template/app-assets/js/scripts/forms/form-tooltip-valid.js"></script>
    <!-- END: Page JS-->

	<script>
        $(window).on('load', function() {
            if (feather) {
                feather.replace({
                    width: 14,
                    height: 14
                });
            }
        })
    </script>
    
    <script type="text/javascript">
    	function memSearch(){
    		var mem_id = $('#searchMemId').val();
    		var mem_id_pla = $('#searchMemId');
    		var mem_id_save = $('#mem_id_save');
    		
    		
    		console.log("mem_id",mem_id);
    		var mem_name =$('#info_mem_name');
    		
    		var url="<%=request.getContextPath()%>/admin/memInfo.do";
    		
    		if(!mem_id){
    			console.log("mem_id",mem_id);
    			alert("아이디를 입력해주세요;")	
    			return false;
    		}
    		
    		var data = {mem_id : mem_id};
    		
    		$.ajax({
    			url : url,
    			type: 'post',
    			data : data,
    			success : function(data){
    				if (data.member.mem_id) {
	    				mem_id_pla.prop("value","");
	    				mem_id_pla.prop("placeholder",data.member.mem_id);
	    				mem_id_save.prop("value",data.member.mem_id);
	    				mem_name.prop("value",data.member.mem_name);
    				}
    				
    			},
    			error : function(error){
    				alert("회원 아이디가 존재하지 않습니다.");
    		}
    		})
    	}
    </script>
    
	<script>
	function newBookRegist(){
		/* nb_code 가져오기 */
		var purchaseCode = document.querySelector('input[id="purchase"]').value;
		var copyBookCode = document.querySelector('input[id="copyBook"]').value;
		var donationCode = document.querySelector('input[id="donation"]').value;
		var wishBookCode = document.querySelector('input[id="wishBook"]').value;
		
		/* 라디오버튼 누르는거에 따라 value값 설정 */
		if(document.querySelector('input[type="radio"][id="purchase"]').checked){
			document.querySelector('input[id="nbw_name"]').value = "구매";
		}
		if(document.querySelector('input[type="radio"][id="copyBook"]').checked){
			document.querySelector('input[id="nbw_name"]').value = "납본";
		}
		if(document.querySelector('input[type="radio"][id="donation"]').checked){
			document.querySelector('input[id="nbw_name"]').value = "기증";
		}
		if(document.querySelector('input[type="radio"][id="wishBook"]').checked){
			document.querySelector('input[id="nbw_name"]').value = "비치";
		}
		
		/* 각 input box에 들어간 데이터를 hidden input에 넣어주기 */
		var book_title = document.querySelector('input[name="book_title"]');
		var book_author = document.querySelector('input[name="book_author"]');
		var book_publisher = document.querySelector('input[name="book_publisher"]');
		var book_isbn = document.querySelector('input[name="book_isbn"]');
		var wb_no = document.querySelector('input[name="wb_no"]');
// 		var wb_no = document.querySelector('input[id="wb_no"][name="wb_no_hidden"]');
// 		alert(wb_no.value);
		
		document.querySelector('#nb_title').value = book_title.value;
		document.querySelector('#nb_author').value = book_author.value;
		document.querySelector('#nb_publish').value = book_publisher.value;
		document.querySelector('#isbn').value = book_isbn.value;
		
		document.querySelector('#wb_no').value = wb_no.value;
		
// 		return;
		
		var form = document.querySelector('form[role=bookform]');
		
		form.submit();
		
<%-- 		window.open("<%=request.getContextPath()%>/admin/main/getBookManage/resultPage.jsp", "_self").close(); --%>
		

	}
	</script>
    
    
    <script type="text/javascript">
    $(function (){
    	$('input[type="radio"][id="purchase"]').on('click', function(){
//     		alert("purchase 진입");
    	  	var purchaseChkValue = $('input[type=radio][id="purchase"]:checked').val();
    	  if(purchaseChkValue){
           	$('#wishBookDiv').css('display','none');
           	$('#donationMemIdDiv').css('display','none');
           	$('#donationMemNameDiv').css('display','none');
    	  }else{
         	$('#wishBookDiv').css('display','block');
      		$('#donationMemIdDiv').css('display','block');
       		$('#donationMemNameDiv').css('display','block');
    	  }
    	 
    	});
    	
    	$('input[type="radio"][id="copyBook"]').on('click', function(){
//     		alert("copyBook 진입");
    	  	var copyBookChkValue = $('input[type=radio][id="copyBook"]:checked').val();
    	  if(copyBookChkValue){
           	$('#wishBookDiv').css('display','none');
           	$('#donationMemIdDiv').css('display','none');
           	$('#donationMemNameDiv').css('display','none');
    	  }else{
         	$('#wishBookDiv').css('display','block');
      		$('#donationMemIdDiv').css('display','block');
       		$('#donationMemNameDiv').css('display','block');
    	  }
    	 
    	});
    	
    	$('input[type="radio"][id="donation"]').on('click', function(){
//     		alert("donation 진입");
    	  	var donationChkValue = $('input[type=radio][id="donation"]:checked').val();
    	  if(donationChkValue){
           	$('#wishBookDiv').css('display','none');
           	$('#donationMemIdDiv').css('display','block');
           	$('#donationMemNameDiv').css('display','block');
    	  }else{
         	$('#wishBookDiv').css('display','block');
      		$('#donationMemIdDiv').css('display','none');
       		$('#donationMemNameDiv').css('display','none');
    	  }
    	 
    	});
    	
    	$('input[type="radio"][id="wishBook"]').on('click', function(){
//     		alert("wishBook 진입");
    	  	var wishBookChkValue = $('input[type=radio][id="wishBook"]:checked').val();
    	  if(wishBookChkValue){
           	$('#wishBookDiv').css('display','block');
           	$('#donationMemIdDiv').css('display','none');
           	$('#donationMemNameDiv').css('display','none');
    	  }else{
         	$('#wishBookDiv').css('display','none');
      		$('#donationMemIdDiv').css('display','block');
       		$('#donationMemNameDiv').css('display','block');
    	  }
    	 
    	});
  	});
    
    </script>
</body>
<!-- END: Body-->

</html>